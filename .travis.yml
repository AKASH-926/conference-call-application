dist: focal
language: java

jdk:
  - openjdk11

before_install:
  - nvm install --lts

cache:
  directories:
    - react/node_modules

install:
  - cd react
  - npm ci

script:
  - cd react
  - npm run build
  - cd ..
  - cp -a react/build/. webapp/src/main/webapp
  - mvn clean install -DskipTests -Dgpg.skip=true
